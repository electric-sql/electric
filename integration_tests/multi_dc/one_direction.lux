[doc Test one direction replication from pg_1 to pg_2]

[global fail_pattern=[Ee][Rr][Rr][Oo][Rr]]
[global psql=electric]

[include shared.luxinc]
[invoke setup]
[timeout 10000]

[shell pg_1]
    !INSERT INTO entries (content) VALUES ('Hello from a');
    ?INSERT 0 1

[shell electric_2]
    ?.* origin=pg_2 .* \[debug\] Sending \d messages to the subscriber

[shell pg_2]
    [invoke wait-for "SELECT * FROM entries;" "Hello from a" 10 "electric=#"]

    !select * FROM entries;
    ?Hello from a
    ?(1 row)

[shell pg_1]
    !SELECT * FROM entries;
    ?Hello from a
    ?(1 row)

[cleanup]
    [invoke teardown]
